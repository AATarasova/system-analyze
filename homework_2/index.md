# Задание
1. Список всех поддоменов в системе с логикой их выбора
2. Core domain chart + таблица из урока
3. Bounded-контексты
4. Сравнение с ES и описание расхождений
5. Описание важных характеристик проекта
6. Архитектурный стиль
7. Итоговая модель системы

![mem](./attachments/mem.png)

# Алгоритм действий
- Главная проблема - это домен. Это цель, "что мы хотим сделать"
- Главную проблему бьем на проблемы поменьше. Проблемы поменьше - это поддомены. "как мы хотим это сделать"
- К проблемам поменьше ищем решения. Решения  - это bounded контексты. "что конкретно мы хотим сделать?" 

**Главная проблема системы** - уменьшение "неважной" рутины для котов-тестировщиков, которая мешает им работать

# Поддомены
1. **Управление зявкой** - это весь процесс от создания заявки клиентом до получения им результата. Основная цель компании, но не конкурентное преимущество (ведь есть тот же профи ру)
2. **Мэтчинг пользователей** - это основная ценность компании, то, для чего вообще создается система.
3. **Менеджмент персонала** - вспомогательная система, это процесс найма новых кадров. Ее главная задача - управлять пулом работников. Потенциально интересен тем, что может развиться в уникальную систему с базой знаний, тестированиями. Также процесс выделения характеристик и критерии оценки работников могут быть интересны и сложны (с точки зрения составляения алгоритма) UPD: **уже основная ценность компании**
4. **Контроль качества** - вспомогательная система, которая предоставляет бизнесу информацию о процессе работы воркеров и способах повышения ее качества.
5. **Авторизация** - вспомогательный сервис для саморегистраци и получения доступа к своим заявкам (созданным или поступвшим на обработку в зависимости от роли).
6. **Бухгалтерия** - вспомогательная система для финансовых операций и расчета заработной платы.
7. **Ставки** - вспомогательная система для повышения мотивации сотрудников
8. **Расходники** - спорно, стоит ли ее выделять, но из тех же соображений, что в [дз1](../homework_1/index.md), решила, что эта подсистема может обособленно от остального развиваться 

# Core domain chart

![core-domain-chart](./attachments/core-domain-chart.png)

| поддомен | преиму-щество | сложность | сторонние решения | измен-чивость | интерес |
| ---- | ---- | ---- | ---- | ---- | ---- |
| Управление зявкой | нет | средняя | возмоджно | максимальная | высокий |
| Жизненный цикл заявки | да | высокая | нет | максимальная | высокий |
| Менеджмент персонала | нет, но может им стать, если разовьется | пока средняя, но с потенциалом | может быть, ценность в тестах и алгоритмах выделения характеристик | ??? | изначально средний, может вырасти |
| Контроль качества | может быть | средняя | нет | высокая | средний |
| Авторизация | нет | низкая, все решают эту задачу | да, типовое решение | низкая | низкий |
| Бухгалтерия | нет | средняя, все решают эту задачу | да, типовое решение | низкая | низкий |
| Ставки | +- | низкая, алгоритм простой | может быть, надо искать | низкая | средний, как идея может быть интересно |
| Расходники | скорее нет | зависит от строгости отчетности | ??? | низкая | низкий, если не будет оригинальной системы автоматизированной выдачи |

Картинка неоднозначная:
- меня беспокоют расходники, и я бы пошла к бизнесу, чтобы уточнять, что они от них хотят. Может быть посредник, который по заказу будет формировать нашей фирме счет, а затем сам организовывать доставку для котеньки. Может быть собственный склад, которому потребуется мега прогрессивная система учета товара, аудит, подбор лучших поставщиков и тд
- менеджмент персонала может быть очень интересным с точки зрения сложной системы отбора (но тут ценность не в том, как будет работать система, а в том, кто и как будет заполнять ее тестами. То есть это бизнесовая ценность, сформированная за счет набора базы и эрудиции кото-менеджеров, а не техническая сложность). Второй аспект - уникальный механизм оценки, вот из-за него (алгоритмическая сложность) решение по оси У находится высоко. Вряд ли мы будем отбирать котят ручками, да?
  
![cats](./attachments/cats.png)
Хотя вот этих котят я ручками выбирала

# Bounded-контексты
Это только начало, да?

![mem-2](./attachments/mem-2.png)

| поддомен | вид | контекст | 
| ---- | ---- | ---- | 
| Жизненный цикл заявки | core | Обработка заявок + Подбор воркеров + Оценка стоимости |
| Менеджмент персонала | generic / supporting | Управление аккаунтами | 
| Контроль качества | supporting | Аналитика |
| Авторизация | generic | Управление аккаунтами | 
| Бухгалтерия | generic | Оплата труда + запросы оплаты клиентов |
| Ставки | supporting | Мотивация сотрудников |
| Расходники | любой... | Обработка заявок? Инвентаризация и склад? | 

Если в качестве изолированного контекста использовать Управление аккаунтами, то менеджер будет выступать в роли администратора системы, который будет проводить тестирования и выдавать роли  


![bounded-context](./attachments/bounded-context.png)

![mem-3](./attachments/mem-3.png)
Три контекста на заявки - сейчас уже известно, что подбор воркера и оценка стоимости будут черными ящиками, которые будут развиваться отдельно (и их смогут независимо развивать разные команды). Сейчас они еще совсем маленькие, ограничиваются одной формулой, поэтому отделять их нет смысла. Но хочется иметь на схеме, чтобы при доработке системы в будущем не забыть о планах на их развитие.

Управление аккаунтами - тут я просто не знаю, надо или не надо это объединять. Если мы купим готовое решение для аутентификации, сами накинем сверху собственную ролевую модельку, ролями при этом будут управлять менеджеры, то вроде выглядит норм. Но есть сомнения.. 

*Ломая четвертую стену*: **Ребята, которые будут проверять, напишите свое мнение в комменты, пожалуйста))**

# Описание важных характеристик проекта 
- каждый, кто зарегистрируется в системе (самостоятельно, то есть через сервис авторизации может быть создан новый юзер), может оставить заявку. При этом ему доступна возможность присоединиться к команде воркеров, отправив соотвестующий запрос и пройдя тестирование.

# Сравнение с ES и описание расхождений
1) Авторизация и управление персоналом, так и не понимаю, одно это или разное..
2) Расходники я и тут, и в [Event storming](https://miro.com/app/board/uXjVNtDepfs=/?moveToWidget=3458764613911662227&cot=14) закинула отдельно от заявок, но вот думаю, не оверинжиниринг ли это на старте системы. Хотя тут тоже можно купить какую-нибудь стороннюю систему инвентаризации.
В остальном вроде все то же самое.

![mem-4](./attachments/mem-4.png)

# Архитектурный стиль
Важно для системы: 
- из-за time to market:
  -  agilability (гибкость), 
  -  testability (простота и полнота тестируемости)
  -  deployability (простота и отлаженность деплоя)
-  из-за стадии системы, она находится в точке роста: 
   -  scalability (рост средней нагрузки)
   -  elasticity (рост пиковой нагрузки)
   -  modifiability (уже сейчас закладываются новые фичи вроде оценки стоимости работ и подбора воркера)
-  из-за ожидания ddos
   -  securability (защищенность)
-  из-за того, что бизнесу важно оценивать процесс и повышать качество за счет обратной связи от клиентов 
   -  usability
- из-за того, что мы вообще-то только начинаем автоматизировать, и нам надо сделать кучу всего
  - simplicity

Если "в лоб" посчитать количество звездочек на таблице из урока, то:

| архитектура | * |
| --- |--- |
| модульный монолит | 18 | 
| service based | 25 | 
| микросервисы | 34 |  

Но если бы все было так просто, все бы использзовали только микросервисы :) Субъективно хочется добавить веса метрикам, где у простоты будет высокий вес - нам надо с нуля спроектировать и написать систему, и на начальном этапе всегда приходится жертвовать качеством для того, чтобы выиграть время (и обеспечить себя техдолгом на пару лет, конечно)


![tech_backlog](./attachments/tech_backlog.png)

От предложеного в первом дз варианта пока не хочется отказываться (приведено без изменений)
![arch](./attachments/arch.png)

Здесь предложен гибридный вариант. Те части системы, которые будут часто взаимодействовать, хочется объединить в модульный монолит. Код будет распределен по проектам, определенным bounded контекстами и бизнесом. В случае увеличения нагрузки - добавляем инстанс монолита.
Разделение по модулям поможет нам по мере роста системы вытаскивать домены из монолита (например, тот же менеджмент персонала).
 Также будут существовать отдельные микросервисы, легко дорабатываемые, не влияющие на систему. 

 В общем, я за итеративность, поэтому вот три картиночки
![arch-1](./attachments/arch-1.png)
![arch-2](./attachments/arch-2.png)
![arch-3](./attachments/arch-3.png)
